# This file is auto-generated.
repository: sumologic/kubernetes-fluentd
tag: 0.12.0
pullPolicy: IfNotPresent

nameOverride: ""

deployment:
nodeSelector: {}
tolerations: {}
replicaCount: 3
resources:
  limits:
    memory: 1Gi
    cpu: 1
  requests:
    memory: 768Mi
    cpu: 0.5

eventsDeployment:
nodeSelector: {}
tolerations: {}
resources:
  limits:
    memory: 256Mi
    cpu: "100m"
  requests:
    memory: 256Mi
    cpu: "100m"

sumologic:
## Setup

# If enabled, a pre-install hook will create Collector and Sources in Sumo Logic
setupEnabled: true

# If enabled, accessId and accessKey will be sourced from Secret Name given
#envFromSecret: sumo-api-secret

# Sumo access ID
#accessId: ""

# Sumo access key
#accessKey: ""

# Sumo API endpoint; Leave blank for automatic endpoint discovery and redirection
# ref: https://help.sumologic.com/APIs/General-API-Information/Sumo-Logic-Endpoints-and-Firewall-Security
endpoint: ""

# Collector name
#collectorName: ""

# Cluster name
clusterName: "kubernetes"

setup:
  clusterRole:
    annotations:
      helm.sh/hook: pre-install
      helm.sh/hook-weight: "1"
      helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
  clusterRoleBinding:
    annotations:
      helm.sh/hook: pre-install
      helm.sh/hook-weight: "2"
      helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
  configMap:
    annotations:
      helm.sh/hook: pre-install
      helm.sh/hook-weight: "2"
      helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
  job:
    annotations:
      helm.sh/hook: pre-install
      helm.sh/hook-weight: "3"
      helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
  serviceAccount:
    annotations:
      helm.sh/hook: pre-install
      helm.sh/hook-weight: "0"
      helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded

# If enabled, collect K8s events
eventCollectionEnabled: true

## Format to post logs into Sumo. json, json_merge, or text
logFormat: fields

## How frequently to push logs to SumoLogic
## ref: https://github.com/SumoLogic/fluentd-kubernetes-sumologic#options
flushInterval: "5s"

## Increase number of http threads to Sumo. May be required in heavy logging clusters
numThreads: 4

chunkLimitSize: "100k"

totalLimitSize: "128m"

## Set the _sourceName metadata field in SumoLogic.
sourceName: "%{namespace}.%{pod}.%{container}"

## Set the _sourceCategory metadata field in SumoLogic.
sourceCategory: "%{namespace}/%{pod_name}"

## Set the prefix, for _sourceCategory metadata.
sourceCategoryPrefix: "kubernetes/"

## Used to replace - with another character.
sourceCategoryReplaceDash: "/"

## Include or exclude Kubernetes metadata such as namespace and pod_name if
## using json log format.
kubernetesMeta: "true"

## Reduces redundant Kubernetes metadata. 
## ref: https://github.com/SumoLogic/fluentd-kubernetes-sumologic#reducing-kubernetes-metadata
kubernetesMetaReduce: "false"

## Option to control adding timestamp to logs. 
addTimestamp: "true"

## Field name when add_timestamp is on.
timestampKey: "timestamp"

## Option to control adding stream to logs.
addStream: "true"

## Option to control adding time to logs.
addTime: "true"

## Verify SumoLogic HTTPS certificates
verifySsl: "true"

## A regular expression for containers. 
## Matching containers will be excluded from Sumo. The logs will still be sent to FluentD.
excludeContainerRegex: ""

## A regular expression for hosts. 
## Matching hosts will be excluded from Sumo. The logs will still be sent to FluentD.
excludeHostRegex: ""

## A regular expression for namespaces. 
## Matching namespaces will be excluded from Sumo. The logs will still be sent to FluentD.
excludeNamespaceRegex: ""

## A regular expression for pods. 
## Matching pods will be excluded from Sumo. The logs will still be sent to FluentD.
excludePodRegex: ""


## Sets the fluentd log level. The default log level, if not specified, is info.
## ref: https://docs.fluentd.org/deployment/logging
# fluentdLogLevel: "debug"

## Override Kubernetes resource types you want to get events for from different Kubernetes
## API versions. The key represents the name of the resource type and the value represents
## the API version.
# watchResourceEventsOverrides:
#   pods: "v1"
#   events: "events.k8s.io/v1beta1"


fluentd:
  ## Option to specify the Fluentd buffer as file/memory.
  buffer: "memory"

k8sMetadataFilter:
  ## Option to control the enabling of metadata filter plugin watch.
  ## ref: https://github.com/fabric8io/fluent-plugin-kubernetes_metadata_filter#configuration
  watch: "true"

  ## Verify ssl certificate of sumologic endpoint.
  verifySsl: "true"

  ## Option to control the enabling of metadata filter plugin cache_size. 
  ## ref: https://github.com/fabric8io/fluent-plugin-kubernetes_metadata_filter#configuration
  bearerCacheSize: "1000"

  ## Option to control the enabling of metadata filter plugin cache_ttl. 
  ## ref: https://github.com/fabric8io/fluent-plugin-kubernetes_metadata_filter#configuration
  bearerCacheTtl: "3600"

